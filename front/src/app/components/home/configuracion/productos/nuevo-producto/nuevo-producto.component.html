<div *ngIf='!cargando'>
  <div class="m-4" (click)='volver()' role="button">
    <h5><span><i class="bi bi-arrow-left"></i></span>VOLVER</h5>
  </div>

  <div class="contenido">
    <div class="contenido__title">
      <h2 class="mb-0">{{modo === 'EDITAR' ? 'Editar' : 'Crear' }} Producto</h2>
    </div>
    <div class="contenido__form">
      <form [formGroup]="formProducto" (ngSubmit)="crearProducto()">
        <div class="contenido__form--datos">
          <div class="item-datos">
            <label  for="nombre" class="form-label">Nombre</label>
            <input type="text" class="form-control" id="nombre" formControlName="nombre" placeholder="Ingrese el nombre del producto" [attr.disabled]='disabledForm ? true : null'>
            <div class="form--field-invalid" *ngIf="formProducto.get('nombre').touched">
              <div *ngIf="formProducto.get('nombre').errors?.maxlength">El nombre debe tener 50 caracteres o menos.</div>
              <div *ngIf="formProducto.get('nombre').errors?.required">El campo no puede estar vacío.</div>
            </div>
          </div> 
          <div class="item-datos">
            <label  for="marca" class="form-label">Marca</label>
            <input type="text" class="form-control" id="marca" formControlName="marca" placeholder="Ingrese la marca del producto" [attr.disabled]='disabledForm ? true : null'>
            <div class="form--field-invalid" *ngIf="formProducto.get('marca').touched">
              <div *ngIf="formProducto.get('marca').errors?.maxlength">La marca debe tener 50 caracteres o menos.</div>
              <div *ngIf="formProducto.get('marca').errors?.required">El campo no puede estar vacío.</div>
            </div>
          </div>
          <div class=" item-datos">
            <label  class="form-label" for="distribuidora">Distribuidora</label>
            <select class="form-control" aria-label=".form-select-lg example" id="distribuidora" formControlName="distribuidora" [attr.disabled]='disabledForm ? true : null'>
              <option value="-1" disabled>Seleccione la distribuidora</option>
              <option *ngFor='let distribuidora of distribuidoras' value="{{distribuidora.id_distribuidora}}">{{distribuidora.nombre}}</option>
            </select>
            <div class="form--field-invalid" *ngIf="formProducto.get('distribuidora').touched">
              <div *ngIf="formProducto.get('distribuidora').errors?.maxlength">La marca debe tener 50 caracteres o menos.</div>
            </div>
          </div>
          <div class="item-datos">
            <label  for="tipo" class="form-label">Tipo</label>
            <input type="text" class="form-control" id="tipo" formControlName="tipo" placeholder="Ingrese el tipo del producto" [attr.disabled]='disabledForm ? true : null'>
            <div class="form--field-invalid" *ngIf="formProducto.get('tipo').touched">
              <div *ngIf="formProducto.get('tipo').errors?.maxlength">El tipo debe tener 50 caracteres o menos.</div>
            </div>
          </div>
          <div class="item-datos">
            <label  for="aka" class="form-label">Aka</label>
            <input type="text" class="form-control" id="aka" formControlName="aka" placeholder="Ingrese el aka del producto" [attr.disabled]='disabledForm ? true : null'>
            <div class="form--field-invalid" *ngIf="formProducto.get('aka').touched">
              <div *ngIf="formProducto.get('aka').errors?.maxlength">El aka debe tener 50 caracteres o menos.</div>
            </div>
          </div>
          <div class="item-datos">
            <label  for="url" class="form-label">Detalles Técnicos</label>
            <input type="text" class="form-control" id="url" formControlName="url" placeholder="Ingrese el URL con detalles tec. del producto" [attr.disabled]='disabledForm ? true : null'>
            <div class="form--field-invalid" *ngIf="formProducto.get('url').touched">
              <div *ngIf="formProducto.get('url').errors?.maxlength">La url debe tener 200 caracteres o menos.</div>
            </div>
          </div>
          <div class="item-datos">
            <label for="unidadAgrupacion" class="form-label">Unidad de Agrupación</label>
            <input type="text" class="form-control" id="unidadAgrupacion" formControlName="unidadAgrupacion" placeholder="Ingrese la unidad de agrupación del producto">
            <div class="form--field-invalid" *ngIf="formProducto.get('unidadAgrupacion').touched">
              
              <div *ngIf="formProducto.get('unidadAgrupacion').errors?.pattern">El valor debe ser un número entero</div>
              <div *ngIf="formProducto.get('unidadAgrupacion').errors?.min">El valor ingresado debe ser un número entero entero mayor a 0.</div>
              
            </div>
          </div>
          <div class="item-datos">
            <label  for="protocolo" class="form-label">Protocolo</label>
            <input type="text" class="form-control" id="protocolo" formControlName="protocolo" placeholder="Ingrese el link protocolo del producto" [attr.disabled]='disabledForm ? true : null'>
            <div class="form--field-invalid" *ngIf="formProducto.get('protocolo').touched">
              <div *ngIf="formProducto.get('protocolo').errors?.maxlength">El protocolo debe tener 200 caracteres o menos.</div>
            </div>
          </div>
          <div class="content__buttons">
            <button class="btn btn-primary btn-lg" type="submit" [disabled]="formProducto.invalid" *ngIf='!disabledForm'>{{modo === 'EDITAR' ? 'Editar' : 'Crear' }} Producto</button>
            <button class="btn btn-primary btn-lg" type="button" disabled *ngIf='disabledForm'>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              Cargando...
          </button>
          </div>
        </div>
        
    </form>
  </div>
</div>

<app-toast></app-toast>